<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Multi Mode Solver</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">

  <!-- Navbar -->
  <div class="p-4 flex items-center bg-gray-800">
    <button onclick="toggleMenu()" class="text-2xl mr-4">&#9776;</button>
    <h1 class="text-xl font-bold">Multi Mode Solver</h1>
  </div>

  <!-- Dropdown Menu -->
  <div id="menu" class="hidden bg-gray-800 text-white px-4 py-2 space-y-2">
    <button onclick="showMode('menu')" class="menu-btn block w-full text-left py-1 hover:text-yellow-400 transform transition duration-500 opacity-0 -translate-x-10">🏠 Menu Utama</button>
    <button onclick="showMode('kolom')" class="menu-btn block w-full text-left py-1 hover:text-yellow-400 transform transition duration-500 opacity-0 -translate-x-10">🔢 Hitung Kolom</button>
    <button onclick="showMode('vektor')" class="menu-btn block w-full text-left py-1 hover:text-yellow-400 transform transition duration-500 opacity-0 -translate-x-10">📐 Vector Solver</button>
    <button onclick="showMode('pecahan')" class="menu-btn block w-full text-left py-1 hover:text-yellow-400 transform transition duration-500 opacity-0 -translate-x-10">➗ Pecahan Solver</button>
  </div>

  <!-- MAIN MENU -->
  <div id="mode-menu" class="flex-1 flex flex-col justify-center items-center text-center gap-6 p-4">
    <h2 class="text-3xl font-bold mb-6">Pilih Mode Solver</h2>
    <button id="main-btn-1" onclick="showMode('kolom')" class="main-btn opacity-0 transform -translate-x-10 bg-blue-600 hover:bg-blue-700 text-white text-lg px-6 py-3 rounded">🔢 Hitung Kolom</button>
    <button id="main-btn-2" onclick="showMode('vektor')" class="main-btn opacity-0 transform translate-x-10 bg-green-600 hover:bg-green-700 text-white text-lg px-6 py-3 rounded">📐 Vector Solver</button>
    <button id="main-btn-3" onclick="showMode('pecahan')" class="main-btn opacity-0 transform -translate-x-10 bg-purple-600 hover:bg-purple-700 text-white text-lg px-6 py-3 rounded">➗ Pecahan Solver</button>
  </div>

  <!-- MODE: Hitung Kolom -->
  <div id="mode-kolom" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">🔢 Sistem Hitung Kolom</h2>
    <label>Masukkan bilangan (pisahkan dengan koma):</label>
    <input type="text" id="inputBilangan" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 2,3,4,5,6"/>
    <label>Masukkan jumlah kolom:</label>
    <input type="number" id="inputKolom" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 3"/>
    <button onclick="hitung()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">Hitung</button>
    <div class="mt-4 bg-gray-800 p-4 rounded" id="output"></div>
  </div>

  <!-- MODE: Vector Solver -->
  <div id="mode-vektor" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">📐 Vector Solver</h2>
    <label>i (x):</label>
    <input id="iVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 1"/>
    <label>j (y):</label>
    <input id="jVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 4"/>
    <label>k (z):</label>
    <input id="kVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 0"/>
    <button onclick="solveVector()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">Hitung Panjang Vektor</button>
    <div class="mt-4 bg-gray-800 p-4 rounded">
      <p class="font-semibold">Langkah Perhitungan:</p>
      <pre id="steps" class="mt-2 font-mono whitespace-pre-line">–</pre>
    </div>
  </div>

  <!-- MODE: Pecahan Solver -->
  <div id="mode-pecahan" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">➗ Pecahan Solver</h2>
    <p class="text-gray-400">Fitur ini masih dalam pengembangan.</p>
  </div>

  <!-- Script -->
  <script>
    function toggleMenu() {
      const menu = document.getElementById("menu");
      const buttons = document.querySelectorAll(".menu-btn");

      menu.classList.toggle("hidden");

      if (!menu.classList.contains("hidden")) {
        buttons.forEach(btn => {
          btn.classList.add("opacity-0", "-translate-x-10");
          btn.classList.remove("opacity-100", "translate-x-0");
        });

        buttons.forEach((btn, index) => {
          setTimeout(() => {
            btn.classList.remove("opacity-0", "-translate-x-10");
            btn.classList.add("opacity-100", "translate-x-0", "transition", "duration-500");
          }, index * 150);
        });
      }
    }

    function showMode(mode) {
      const modes = ['menu', 'kolom', 'vektor', 'pecahan'];
      modes.forEach(id => {
        document.getElementById(`mode-${id}`).classList.add('hidden');
      });
      document.getElementById(`mode-${mode}`).classList.remove('hidden');
      document.getElementById("menu").classList.add("hidden");
    }

    function hitung() {
      const angkaInput = document.getElementById("inputBilangan").value;
      const kolom = parseInt(document.getElementById("inputKolom").value);
      const angkaArray = angkaInput.split(',').map(a => parseInt(a.trim())).filter(a => !isNaN(a));
      const jumlahAngka = angkaArray.length;

      if (jumlahAngka === 0 || isNaN(kolom) || kolom <= 0) {
        document.getElementById("output").innerHTML = "<p>❌ Input tidak valid.</p>";
        return;
      }

      const hasil1 = Math.pow(jumlahAngka, kolom);
      let box1 = "";
      for (let i = 0; i < kolom; i++) {
        box1 += `<div class='inline-block px-3 py-1 m-1 bg-gray-700 border border-gray-500 rounded'>${jumlahAngka}</div>`;
      }
      const perkalian1 = Array(kolom).fill(jumlahAngka).join(" x ");

      let hasil2 = 1;
      let box2 = "";
      let faktorArr = [];
      for (let i = 0; i < kolom; i++) {
        let val = jumlahAngka - i;
        if (val <= 0) {
          hasil2 = 0;
          break;
        }
        hasil2 *= val;
        faktorArr.push(val);
        box2 += `<div class='inline-block px-3 py-1 m-1 bg-gray-700 border border-gray-500 rounded'>${val}</div>`;
      }

      const outputHTML = `
        <p>Jumlah bilangan: <strong>${jumlahAngka}</strong></p>
        <p>Jumlah kolom: <strong>${kolom}</strong></p>

        <p><strong>Mode 1 (boleh diulang):</strong></p>
        ${box1}<br/>
        <strong>${perkalian1} = ${hasil1}</strong><br/><br/>

        <p><strong>Mode 2 (tidak boleh diulang):</strong></p>
        ${box2}<br/>
        <strong>${faktorArr.join(" x ")} = ${hasil2}</strong>
      `;

      document.getElementById("output").innerHTML = outputHTML;
    }

    function solveVector() {
      const i = parseFloat(document.getElementById("iVal").value) || 0;
      const j = parseFloat(document.getElementById("jVal").value) || 0;
      const k = parseFloat(document.getElementById("kVal").value) || 0;

      const components = [];
      const steps = [];

      if (i !== 0) {
        components.push(`${i}²`);
        steps.push(i ** 2);
      }
      if (j !== 0) {
        components.push(`${j}²`);
        steps.push(j ** 2);
      }
      if (k !== 0) {
        components.push(`${k}²`);
        steps.push(k ** 2);
      }

      if (components.length === 0) {
        document.getElementById("steps").textContent = "Semua komponen nol, panjang vektor = 0";
        return;
      }

      const sum = steps.reduce((a, b) => a + b, 0);
      const sqrtVal = Math.sqrt(sum);
      const isPerfect = Number.isInteger(sqrtVal);

      let stepStr = `|v| = √(${components.join(" + ")})\n`;
      stepStr += `    = √(${steps.join(" + ")})\n`;
      stepStr += `    = √${sum}`;
      if (isPerfect) {
        stepStr += `\n    = ${sqrtVal}`;
      }

      document.getElementById("steps").textContent = stepStr;
    }

    function animateMainButtons() {
      const buttons = [
        document.getElementById("main-btn-1"),
        document.getElementById("main-btn-2"),
        document.getElementById("main-btn-3")
      ];

      buttons.forEach((btn, i) => {
        setTimeout(() => {
          btn.classList.remove("opacity-0", "-translate-x-10", "translate-x-10");
          btn.classList.add("opacity-100", "translate-x-0", "transition", "duration-500");
        }, i * 200);
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      showMode("menu");
      animateMainButtons();
    });
  </script>
</body>
</html>