<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Multi Mode Solver</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.4s ease-out;
    }
  </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">

  <!-- Navbar -->
  <div class="p-4 flex items-center bg-gray-800">
    <button onclick="toggleMenu()" class="text-2xl mr-4">&#9776;</button>
    <h1 class="text-xl font-bold">Multi Mode Solver</h1>
  </div>

  <!-- Dropdown Menu -->
  <div id="menu" class="hidden bg-gray-800 text-white px-4 py-2">
    <button onclick="showMode('menu')" class="block w-full text-left py-1 hover:text-yellow-400">üè† Menu Utama</button>
    <button onclick="showMode('kolom')" class="block w-full text-left py-1 hover:text-yellow-400">üî¢ Hitung Kolom</button>
    <button onclick="showMode('vektor')" class="block w-full text-left py-1 hover:text-yellow-400">üìê Vector Solver</button>
    <button onclick="showMode('gaya')" class="block w-full text-left py-1 hover:text-yellow-400">‚ö° Gaya Coulomb</button>
  </div>

  <!-- MAIN MENU -->
  <div id="mode-menu" class="flex-1 flex flex-col justify-center items-center text-center gap-6 p-4">
    <h2 class="text-3xl font-bold mb-6">Pilih Mode Solver</h2>
    <button onclick="showMode('kolom')" class="bg-blue-600 hover:bg-blue-700 text-white text-lg px-6 py-3 rounded">üî¢ Hitung Kolom</button>
    <button onclick="showMode('vektor')" class="bg-green-600 hover:bg-green-700 text-white text-lg px-6 py-3 rounded">üìê Vector Solver</button>
    <button onclick="showMode('gaya')" class="bg-yellow-600 hover:bg-yellow-700 text-white text-lg px-6 py-3 rounded">‚ö° Gaya Coulomb</button>
  </div>

  <!-- MODE: Hitung Kolom -->
  <div id="mode-kolom" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">üî¢ Sistem Hitung Kolom</h2>
    <label>Masukkan bilangan (pisahkan dengan koma):</label>
    <input type="text" id="inputBilangan" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 1,2,3"/>
    <label>Masukkan jumlah kolom:</label>
    <input type="number" id="inputKolom" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 1"/>
    <button onclick="hitung()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">Hitung</button>
    <div class="mt-4 bg-gray-800 p-4 rounded" id="output"></div>
  </div>

  <!-- MODE: Vector Solver -->
  <div id="mode-vektor" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">üìê Vector Solver</h2>
    <label>i (x):</label>
    <input id="iVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 1"/>
    <label>j (y):</label>
    <input id="jVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 1"/>
    <label>k (z):</label>
    <input id="kVal" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="contoh: 1"/>
    <button onclick="solveVector()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">Hitung Panjang Vektor</button>
    <div class="mt-4 bg-gray-800 p-4 rounded">
      <p class="font-semibold">Langkah Perhitungan:</p>
      <pre id="steps" class="mt-2 font-mono whitespace-pre-line">‚Äì</pre>
    </div>
  </div>

  <!-- MODE: Gaya Coulomb -->
  <div id="mode-gaya" class="hidden p-4">
    <h2 class="text-2xl font-semibold mb-4">‚ö° Resultan Gaya Coulomb</h2>
    <label>F‚ÇÅ‚ÇÇ (N):</label>
    <input id="f12" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 1" />
    <label>F‚ÇÅ‚ÇÉ (N):</label>
    <input id="f13" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 1" />
    <label>Cos (¬∞):</label>
    <input id="sudut" type="number" class="w-full p-2 mb-2 bg-gray-800 border border-gray-600 rounded" placeholder="Contoh: 60" />
    <button onclick="hitungResultanGaya()" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded">Hitung Resultan</button>
    <button onclick="toggleLangkah()" id="toggleBtn" class="mt-2 bg-gray-600 hover:bg-gray-700 px-4 py-1 rounded">Tampilkan versi dibulatkan</button>
    <div class="mt-4 bg-gray-800 p-4 rounded">
      <p class="font-semibold">Hasil dan Langkah:</p>
      <div class="overflow-x-auto">
        <pre id="hasilGaya" class="mt-2 font-mono whitespace-pre">‚Äì</pre>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    function toggleMenu() {
      document.getElementById("menu").classList.toggle("hidden");
    }

    function showMode(mode) {
      const modes = ['menu', 'kolom', 'vektor', 'gaya'];
      modes.forEach(id => {
        const el = document.getElementById(`mode-${id}`);
        el.classList.add('hidden');
        el.classList.remove('animate-fade-in');
      });

      const showEl = document.getElementById(`mode-${mode}`);
      showEl.classList.remove('hidden');
      void showEl.offsetWidth;
      showEl.classList.add('animate-fade-in');
      document.getElementById("menu").classList.add("hidden");
    }

    function hitung() {
      const angkaInput = document.getElementById("inputBilangan").value;
      const kolom = parseInt(document.getElementById("inputKolom").value);
      const angkaArray = angkaInput.split(',').map(a => parseInt(a.trim())).filter(a => !isNaN(a));
      const jumlahAngka = angkaArray.length;

      if (jumlahAngka === 0 || isNaN(kolom) || kolom <= 0) {
        document.getElementById("output").innerHTML = "<p>‚ùå Input tidak valid.</p>";
        return;
      }

      const hasil1 = Math.pow(jumlahAngka, kolom);
      let box1 = "";
      for (let i = 0; i < kolom; i++) {
        box1 += `<div class='inline-block px-3 py-1 m-1 bg-gray-700 border border-gray-500 rounded'>${jumlahAngka}</div>`;
      }
      const perkalian1 = Array(kolom).fill(jumlahAngka).join(" x ");

      let hasil2 = 1;
      let box2 = "";
      let faktorArr = [];
      for (let i = 0; i < kolom; i++) {
        let val = jumlahAngka - i;
        if (val <= 0) {
          hasil2 = 0;
          break;
        }
        hasil2 *= val;
        faktorArr.push(val);
        box2 += `<div class='inline-block px-3 py-1 m-1 bg-gray-700 border border-gray-500 rounded'>${val}</div>`;
      }

      const outputHTML = `
        <p>Jumlah bilangan: <strong>${jumlahAngka}</strong></p>
        <p>Jumlah kolom: <strong>${kolom}</strong></p>
        <p><strong>Mode 1 (boleh diulang):</strong></p>
        ${box1}<br/>
        <strong>${perkalian1} = ${hasil1}</strong><br/><br/>
        <p><strong>Mode 2 (tidak boleh diulang):</strong></p>
        ${box2}<br/>
        <strong>${faktorArr.join(" x ")} = ${hasil2}</strong>
      `;
      document.getElementById("output").innerHTML = outputHTML;
    }

    function solveVector() {
      const i = parseFloat(document.getElementById("iVal").value) || 0;
      const j = parseFloat(document.getElementById("jVal").value) || 0;
      const k = parseFloat(document.getElementById("kVal").value) || 0;

      const i2 = i ** 2;
      const j2 = j ** 2;
      const k2 = k ** 2;

      const total = i2 + j2 + k2;
      const sqrtVal = Math.sqrt(total);
      const isPerfect = Number.isInteger(sqrtVal);

      let stepStr = `|v| = ‚àö(${i}¬≤ + ${j}¬≤ + ${k}¬≤)\n`;
      stepStr += `    = ‚àö(${i2} + ${j2} + ${k2})\n`;
      stepStr += `    = ‚àö${total}`;
      if (isPerfect) stepStr += `\n    = ${sqrtVal}`;

      document.getElementById("steps").textContent = stepStr;
    }

    let langkahAsli = "", langkahBulat = "", modeLangkah = "asli";

    function hitungResultanGaya() {
      const F12 = parseFloat(document.getElementById("f12").value);
      const F13 = parseFloat(document.getElementById("f13").value);
      const sudut = parseFloat(document.getElementById("sudut").value);

      if (isNaN(F12) || isNaN(F13) || isNaN(sudut)) {
        document.getElementById("hasilGaya").textContent = "‚ùå Input tidak valid.";
        return;
      }

      const cosTheta = Math.cos((sudut * Math.PI) / 180);
      const F12_2 = F12 ** 2;
      const F13_2 = F13 ** 2;
      const duaF1F3cos = 2 * F12 * F13 * cosTheta;
      const totalAsli = F12_2 + F13_2 + duaF1F3cos;
      const resultanAsli = Math.sqrt(totalAsli);

      langkahAsli =
        `R = ‚àö(F‚ÇÅ‚ÇÇ¬≤ + F‚ÇÅ‚ÇÉ¬≤ + 2 √ó F‚ÇÅ‚ÇÇ √ó F‚ÇÅ‚ÇÉ √ó cos(Œ∏))\n` +
        `  = ‚àö(${F12}¬≤ + ${F13}¬≤ + 2 √ó ${F12} √ó ${F13} √ó cos(${sudut}))\n` +
        `  = ‚àö(${F12_2.toFixed(2)} + ${F13_2.toFixed(2)} + ${duaF1F3cos.toFixed(2)})\n` +
        `  = ‚àö(${totalAsli.toFixed(2)})\n` +
        `  ‚âà ${resultanAsli.toFixed(2)} N`;

      const F12b = Math.round(F12);
      const F13b = Math.round(F13);
      const sudutB = Math.round(sudut);
      const cosB = Math.cos((sudutB * Math.PI) / 180);
      const F12_2b = Math.round(F12b ** 2);
      const F13_2b = Math.round(F13b ** 2);
      const duaF1F3cosB = Math.round(2 * F12b * F13b * cosB);
      const totalBulat = F12_2b + F13_2b + duaF1F3cosB;
      const resultanBulat = Math.round(Math.sqrt(totalBulat));

      langkahBulat =
        `R = ‚àö(F‚ÇÅ‚ÇÇ¬≤ + F‚ÇÅ‚ÇÉ¬≤ + 2 √ó F‚ÇÅ‚ÇÇ √ó F‚ÇÅ‚ÇÉ √ó cos(Œ∏))\n` +
        `  = ‚àö(${F12b}¬≤ + ${F13b}¬≤ + 2 √ó ${F12b} √ó ${F13b} √ó cos(${sudutB}))\n` +
        `  = ‚àö(${F12_2b} + ${F13_2b} + ${duaF1F3cosB})\n` +
        `  = ‚àö(${totalBulat})\n` +
        `  = ${resultanBulat} N`;

      modeLangkah = "asli";
      document.getElementById("hasilGaya").textContent = langkahAsli;
      document.getElementById("toggleBtn").textContent = "Tampilkan versi dibulatkan";
    }

    function toggleLangkah() {
      if (modeLangkah === "asli") {
        document.getElementById("hasilGaya").textContent = langkahBulat;
        document.getElementById("toggleBtn").textContent = "Tampilkan versi asli";
        modeLangkah = "bulat";
      } else {
        document.getElementById("hasilGaya").textContent = langkahAsli;
        document.getElementById("toggleBtn").textContent = "Tampilkan versi dibulatkan";
        modeLangkah = "asli";
      }
    }

    showMode("menu");
  </script>
</body>
</html>